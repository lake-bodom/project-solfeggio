(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(74)},39:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(15),i=n.n(r),l=n(5),c=n(6),s=n(8),u=n(7),d=n(9),p=(n(39),n(31)),y=n.n(p),m=n(18),f=(n(55),n(56),function(e){var t=e.clickHandler,n=e.menuIsOpen,a=e.left,r="burger".concat(n?" active":"");return o.a.createElement("div",{onFocus:function(e){e.target.blur()},style:{left:a},className:r,onClick:t},o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null))}),h=n(16),v=function(e){var t=e.left,n=e.clickHandler;return o.a.createElement("div",{className:"menu-body",style:{left:t}},o.a.createElement("nav",{className:"nav"},o.a.createElement(h.b,{onClick:n,to:"/"},"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u0430\u044f \u0438\u0433\u0440\u0430"),o.a.createElement(h.b,{onClick:n,to:"/find-note"},"\u0418\u0441\u043a\u0430\u0442\u044c \u043d\u043e\u0442\u0443"),o.a.createElement(h.b,{onClick:n,to:"/intervals"},"\u041f\u043e\u0438\u0441\u043a \u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430"),o.a.createElement(h.b,{onClick:n,to:"/dictation"},"\u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0438\u043a\u0442\u0430\u043d\u0442"),o.a.createElement(h.b,{onClick:n,to:"/options"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")))},g=(n(59),function(e){var t=e.onClick,n=e.children,a=e.cls,r=e.active,i=e.disabled,l=["button",a];return r&&l.push("active"),o.a.createElement("button",{onClick:t,className:l.join(" "),disabled:i,onFocus:function(e){e.target.blur()}},n)});g.defaultProps={children:"click",onClick:function(){},cls:"secondary-outline",active:!1};var O=g,E=(n(60),n(61),n(62),function(e){var t=e.children,n=["buttonGroup",e.cls];return o.a.createElement("div",{className:n.join(" ")},t)});E.defaultProps={children:"",cls:"horizontal"};var N=E,A=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).modal=document.createElement("div"),n.closeHandler=function(){setTimeout(function(){n.props.close()},100)},n.saveHandler=function(){n.closeHandler(),n.props.saveButtonHandler()},n.cancelHandler=function(){n.closeHandler(),n.props.cancelButtonHandler()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.modal.className="modal-wrap",document.body.appendChild(this.modal),document.body.style.overflowY="hidden"}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.modal),document.body.style.overflowY="auto"}},{key:"render",value:function(){var e=this.props,t=e.saveButton,n=e.saveButtonName,a=e.cancelButton,r=e.cancelButtonName;return i.a.createPortal(o.a.createElement("div",{className:"modal-window"},o.a.createElement("span",{className:"close",onClick:this.closeHandler},"\xd7"),this.props.children,o.a.createElement(N,{cls:"flex"},t?o.a.createElement(O,{onClick:this.saveHandler,cls:"info"},n):null,a?o.a.createElement(O,{onClick:this.cancelHandler,cls:"danger"},r):null)),this.modal)}}]),t}(a.Component);A.defaultProps={cancelButtonHandler:function(){}};var S=function(e){var t=e.close,n=e.saveButtonHandler;return o.a.createElement(A,{close:t,saveButton:!0,saveButtonName:"\u0414\u0430",cancelButton:!0,cancelButtonName:"\u041d\u0435\u0442",saveButtonHandler:n,cancelButtonHandler:function(){}},o.a.createElement("h3",null,"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u0441\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),o.a.createElement("p",null,"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0441\u0431\u0440\u043e\u0441 \u0432\u0441\u0435\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a?"))},b=(n(63),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).modalOpenerHandler=function(){n.props.actionSetModalWindowFlag(!0)},n.modalCloserHandler=function(){n.props.actionSetModalWindowFlag(!1)},n.saveButtonHandler=function(){localStorage.clear(),n.props.setInitialState(),n.props.actionSetDataClearingFlag(!0),setTimeout(function(){n.props.actionSetDataClearingFlag(!1)},1e3)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.modalOpenerHandler,t=this.props,n=t.modalWindowFlag,a=t.dataIsClearing,r=t.withTitle;return o.a.createElement("div",{className:"clear-settings"},r?o.a.createElement("h3",null,"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"):null,o.a.createElement(O,{onClick:e},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u0441\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),a?o.a.createElement("span",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0431\u0440\u043e\u0448\u0435\u043d\u044b"):null,n?o.a.createElement(S,{close:this.modalCloserHandler,saveButtonHandler:this.saveButtonHandler}):null)}}]),t}(a.Component)),I=n(2),T=n(1),w=function(e){return{type:"MENU_ACTION",payload:{isOpen:e}}},F=function(e){return{type:"NEED_TO_WRITE_NOTE",payload:e}},C=function(e,t){return{type:"WRITE_PLAY_NOTE",needToWriteNote:t,payload:Object(T.a)({},e,{id:Date.now()})}},M=function(e){return{type:"SET_MODE",payload:{mode:e.mode,stat:e.stat}}},K=function(e){return{type:"KEYBOARD_SET_PLAY_FLAG",payload:e}},_=function(e){return{type:"SET_MODAL_WINDOW_FLAG",payload:e}},k=function(e){return{type:"KEYBOARD_SET_PLAY_WRITTEN_MELODY_FLAG",payload:e}},H=function(e){return{type:"KEYBOARD_SET_CHANGE_MODE_FLAG",payload:e}},W=function(e){return{type:"KEYBOARD_SET_DICTATION_CLEAR_NOTE_FLAG",payload:e}},j=function(e){return{type:"KEYBOARD_SET_DICTATION_CHECK_FLAG",payload:e}},B=function(e){return{type:"KEYBOARD_SET_INTERVAL_BUTTON_FLAG",payload:{intervalButtonFlag:e,interval:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}},x=function(e){return{type:"KEYBOARD_SET_NEW_HOT_KEY_FLAG",payload:e}},D={setInitialState:function(){return{type:"SET_INITIAL_STATE"}},actionSetModalWindowFlag:_,actionSetDataClearingFlag:function(e){return{type:"DATA_CLEARING_FLAG",payload:e}}},R=Object(I.b)(function(e){var t=e.application;return{modalWindowFlag:t.modalWindowFlag,dataIsClearing:t.dataIsClearing}},D)(b),L=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={hasError:!1},n.reloadHandler=function(){window.location.reload(!0)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.hasError?o.a.createElement("div",{className:"error-boundary"},o.a.createElement("p",null,"\u041f\u043e\u0445\u043e\u0436\u0435, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443. \u0415\u0441\u043b\u0438 \u043d\u0435 \u043f\u043e\u043c\u043e\u0433\u043b\u043e, \u0441\u0431\u0440\u043e\u0441\u044c\u0442\u0435 \u0432\u0441\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438, \u0430 \u043f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."),o.a.createElement("p",null,o.a.createElement(R,{withTitle:!1})),o.a.createElement("p",null,o.a.createElement(O,{onClick:this.reloadHandler},"\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"))):this.props.children)}}]),t}(a.Component),P=function(e){var t=e.menuIsOpen,n=e.actionMenuAction,a=t?"260px":"10px",r=t?"0px":"-1000px",l=function(){n()};return i.a.createPortal(o.a.createElement(L,null,o.a.createElement("div",{className:"menu"},o.a.createElement(v,{left:r,clickHandler:l}),o.a.createElement(f,{left:a,clickHandler:l,menuIsOpen:t}))),document.getElementById("menu"))},q={actionMenuAction:w},G=Object(I.b)(function(e){return{menuIsOpen:e.application.menuIsOpen}},q)(P),U=function(e){var t=e.rightAnswers,n=e.amountOfAnswers,a=0!==n?Math.floor(Math.round(t/n*100)):"0";return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,t),"\xa0/\xa0",o.a.createElement("span",null,n),"\xa0",o.a.createElement("span",null,"(",a,"%)"))},Y=function(e){var t=e.name;return o.a.createElement("span",null,t)},V=(n(65),function(e){var t=e.stat,n=t.nameOfInterval,a=t.right,r=t.rightAnswers,i=t.amountOfAnswers,l=t.showAnswer,c=n?o.a.createElement(Y,{name:n}):o.a.createElement(U,{rightAnswers:r,amountOfAnswers:i}),s=["stat"];return l&&(a?s.push("rightAnswer"):s.push("wrongAnswer")),o.a.createElement("div",{className:s.join(" ")},c)}),X=Object(I.b)(function(e){return{stat:e.statistics}},{})(V),z=(n(66),function(e){var t=e.stat,n=e.mode;return o.a.createElement(L,null,o.a.createElement("div",{className:"header"},t?o.a.createElement(X,null):null,n?o.a.createElement("h2",null,n):null))}),J=Object(I.b)(function(e){var t=e.application;return{mode:t.mode,stat:t.stat}},{})(z),Q=(n(67),function(e){var t=e.elem,n=e.className,a=e.sharp,r=e.play;return o.a.createElement("div",{className:n.join(" "),onClick:function(){r(t.key)}},a?t.name:t.fullName)});Q.defaultProps={play:function(){}};var Z=Q,$=function(e){var t=e.elem,n=e.play;return t.map(function(e){var t=["piano-key"],a=e.name.includes("#")?"piano-black-key":"piano-white-key";return t.push(a),e.active&&t.push("piano-key-active"),e.right&&t.push("piano-key-right"),e.wrong&&t.push("piano-key-wrong"),o.a.createElement(Z,{play:n,key:e.key,elem:e,className:t})})};$.defaultProps={play:function(){},elem:[]};var ee=$,te=function(e){var t=e.arrOfNotes,n=e.play;return t.map(function(e){var t=o.a.createElement(ee,{elem:e,play:n});return o.a.createElement("div",{key:e[0].fullName,className:"piano-keys-section"},t)})};te.defaultProps={arrOfNotes:[],play:function(){}};var ne=te,ae=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.arrOfNotes,n=e.play;return o.a.createElement(L,null,o.a.createElement("div",{className:"piano"},o.a.createElement(ne,{arrOfNotes:t,play:n})))}}]),t}(o.a.Component),oe=Object(I.b)(function(e){return{arrOfNotes:e.piano.arrOfNotes}})(ae),re=(n(68),function(e){var t=e.sequenceOfNotes,n=e.nextSequenceOfNotes,a=e.typeOfInterval,r=e.settingsIsOpen,i=e.showAnswer,l=e.sliceArr,c=e.duration,s=e.play,u=e.actionIntervalsSettingsAction,d=e.actionNextButtonClick,p=e.actionGetNextInterval,y=e.actionHideAnswer,m=e.actionUpdatePianoKeys,f=e.actionKeyboardSetPlayFlag,h=e.playFlag,v=function(){var e,o;switch(i?(e=n[0],o=n[1]):(e=t[0],o=t[1]),a){case"melodicUp":s(e),setTimeout(function(){s(o)},1e3*c);break;case"melodicDown":s(o),setTimeout(function(){s(e)},1e3*c);break;case"harmonic":s(e),s(o);break;default:return}},g=function(){d(!r),p({sliceArr:l}),m(),y(),v()};h&&!r?(setTimeout(function(){f(!1)},300),i?g():v()):f(!1);var E=[r?"secondary":"info"];return h&&E.push("active"),o.a.createElement(N,{cls:"horizontal"},o.a.createElement(O,{cls:E.join(" "),disabled:!!r,onClick:i?g:v},i?"\u0414\u0430\u043b\u044c\u0448\u0435":"\u0418\u0433\u0440\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b"),o.a.createElement(O,{cls:r?"info":"secondary",onClick:function(){u(!r),r&&(d(),m(),y(),p({sliceArr:l,initNewIntervalSequence:!0}))}},r?"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"))}),ie=function(e){var t=e.actionSetActiveTypeOfInterval,n=e.typeOfInterval,a=e.changeModeFlag,r=e.actionKeyboardSetChangeModeFlag,i="primary active",l=["melodicUp","melodicDown","harmonic"],c=n===l[0],s=n===l[1],u=n===l[2];return a&&(r(!1),function(){var e=l.indexOf(n);-1!==e&&t(l[(e+1)%l.length])}()),o.a.createElement(N,{cls:"horizontal"},o.a.createElement(O,{cls:c?i:"primary-outline",onClick:function(){t(l[0])},disabled:!!c},"\u041c\u0435\u043b\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0432\u0432\u0435\u0440\u0445"),o.a.createElement(O,{cls:s?i:"primary-outline",onClick:function(){t(l[1])},disabled:!!s},"\u041c\u0435\u043b\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0432\u043d\u0438\u0437"),o.a.createElement(O,{cls:u?i:"primary-outline",onClick:function(){t(l[2])},disabled:!!u},"\u0413\u0430\u0440\u043c\u043e\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439"))},le=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.settingsIsOpen&&this.props.actionIntervalsSettingsAction(!1),this.props.actionGetNextInterval({sliceArr:this.props.sliceArr,initNewIntervalSequence:!0}),this.props.actionSetMode({mode:"\u041f\u043e\u0438\u0441\u043a \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430",stat:!0}),this.props.actionUpdatePianoKeys(),this.props.playFlag&&this.props.actionKeyboardSetPlayFlag(!1),this.props.changeModeFlag&&this.props.actionKeyboardSetChangeModeFlag(!1)}},{key:"componentWillUnmount",value:function(){this.props.actionStatisticsClearing(),this.props.actionIntervalsSettingsAction(!1),this.props.playFlag&&this.props.actionKeyboardSetPlayFlag(!1),this.props.changeModeFlag&&this.props.actionKeyboardSetChangeModeFlag(!1),this.props.changeModeFlag&&this.props.actionKeyboardSetChangeModeFlag(!1)}},{key:"render",value:function(){var e=this.props,t=e.sliceArr,n=e.play,a=e.typeOfInterval,r=e.sequenceOfNotes,i=e.nextSequenceOfNotes,l=e.settingsIsOpen,c=e.showAnswer,s=e.duration,u=e.actionSetActiveTypeOfInterval,d=e.actionIntervalsSettingsAction,p=e.actionNextButtonClick,y=e.actionGetNextInterval,m=e.actionHideAnswer,f=e.actionUpdatePianoKeys,h=e.playFlag,v=e.actionKeyboardSetPlayFlag,g=e.changeModeFlag,O=e.actionKeyboardSetChangeModeFlag;return o.a.createElement("div",{className:"intervalsOptionsButtons"},o.a.createElement(re,{sequenceOfNotes:r,nextSequenceOfNotes:i,typeOfInterval:a,settingsIsOpen:l,showAnswer:c,sliceArr:t,duration:s,play:n,actionIntervalsSettingsAction:d,actionNextButtonClick:p,actionGetNextInterval:y,actionUpdatePianoKeys:f,actionHideAnswer:m,playFlag:h,actionKeyboardSetPlayFlag:v}),o.a.createElement(ie,{typeOfInterval:a,actionSetActiveTypeOfInterval:u,changeModeFlag:g,actionKeyboardSetChangeModeFlag:O}))}}]),t}(o.a.Component),ce=function(e){return{type:"INCREMENT_RIGHT_ANSWERS",payload:e}},se=function(e){return{type:"INCREMENT_AMOUNT_OF_ANSWERS",payload:e}},ue=function(){return{type:"STATISTICS_CLEARING"}},de=function(){return{type:"STATISTICS_HIDE_ANSWER"}},pe=function(){return{type:"UPDATE_PIANO_KEYS"}},ye=function(e){return{type:"SHOW_NOTES_ON_THE_PIANO",payload:e}},me={actionSetActiveTypeOfInterval:function(e){return{type:"SET_ACTIVE_TYPE_OF_INTERVAL",payload:e}},actionIntervalsSettingsAction:function(e){return{type:"INTERVALS_SETTINGS_ACTION",payload:e}},actionNextButtonClick:function(e){return{type:"NEXT_BUTTON_CLICK",payload:e}},actionGetNextInterval:function(e){return{type:"GET_NEXT_INTERVAL",payload:e}},actionStatisticsClearing:ue,actionHideAnswer:de,actionSetMode:M,actionUpdatePianoKeys:pe,actionKeyboardSetPlayFlag:K,actionKeyboardSetChangeModeFlag:H},fe=Object(I.b)(function(e){var t=e.intervals,n=e.piano,a=e.application;return{sliceArr:n.sliceArr,sequenceOfNotes:t.sequenceOfNotes,nextSequenceOfNotes:t.nextSequenceOfNotes,typeOfInterval:t.typeOfInterval,showAnswer:t.showAnswer,settingsIsOpen:t.settingsIsOpen,duration:a.duration,playFlag:a.playFlag,changeModeFlag:a.changeModeFlag}},me)(le),he=function(e){var t=e.groupIndex,n=e.group,a=e.settingsIsOpen,r=e.intervalClickHandler,i=e.activeKeyboardInterval,l=n.map(function(e,n){var l=["secondary-outline"];return i&&i.name&&i.name===e.name&&l.push("active"),o.a.createElement(O,{key:e.name,onClick:function(){r(e)},cls:l.join(" ")},a?o.a.createElement("span",{className:"check"},e.chosen?String.fromCharCode(10003):String.fromCharCode(215)):null,o.a.createElement("b",null,4*t+n+1,")\xa0"),e.rusName)});return o.a.createElement(N,{cls:"vertical"},l)},ve=[{name:"minorSecond",rusName:"\u041c\u0430\u043b\u0430\u044f \u0421\u0435\u043a\u0443\u043d\u0434\u0430",numberOfSemitones:1,chosen:!0},{name:"majorSecond",rusName:"\u0411\u043e\u043b\u044c\u0448\u0430\u044f \u0421\u0435\u043a\u0443\u043d\u0434\u0430",numberOfSemitones:2,chosen:!0},{name:"minorThird",rusName:"\u041c\u0430\u043b\u0430\u044f \u0422\u0435\u0440\u0446\u0438\u044f",numberOfSemitones:3,chosen:!0},{name:"majorThird",rusName:"\u0411\u043e\u043b\u044c\u0448\u0430\u044f \u0422\u0435\u0440\u0446\u0438\u044f",numberOfSemitones:4,chosen:!0},{name:"perfectFourth",rusName:"\u0427\u0438\u0441\u0442\u0430\u044f \u041a\u0432\u0430\u0440\u0442\u0430",numberOfSemitones:5,chosen:!0},{name:"triton",rusName:"\u0422\u0440\u0438\u0442\u043e\u043d",numberOfSemitones:6,chosen:!0},{name:"perfectFifth",rusName:"\u0427\u0438\u0441\u0442\u0430\u044f \u041a\u0432\u0438\u043d\u0442\u0430",numberOfSemitones:7,chosen:!0},{name:"minorSixth",rusName:"\u041c\u0430\u043b\u0430\u044f \u0421\u0435\u043a\u0441\u0442\u0430",numberOfSemitones:8,chosen:!0},{name:"majorSixth",rusName:"\u0411\u043e\u043b\u044c\u0448\u0430\u044f \u0421\u0435\u043a\u0441\u0442\u0430",numberOfSemitones:9,chosen:!0},{name:"minorSeventh",rusName:"\u041c\u0430\u043b\u0430\u044f \u0421\u0435\u043f\u0442\u0438\u043c\u0430",numberOfSemitones:10,chosen:!0},{name:"majorSeventh",rusName:"\u0411\u043e\u043b\u044c\u0448\u0430\u044f \u0421\u0435\u043f\u0442\u0438\u043c\u0430",numberOfSemitones:11,chosen:!0},{name:"octave",rusName:"\u041e\u043a\u0442\u0430\u0432\u0430",numberOfSemitones:12,chosen:!0}],ge=function(e){return e.filter(function(e){return e.chosen})},Oe=function(e){var t,n,a=[];for(t=0,n=e.length;t<n;t+=4)a.push(e.slice(t,t+4));return a},Ee=function(e,t){var n=t.numberOfSemitones;return Ne(e,n)},Ne=function(e,t){var n=e[Math.floor(Math.random()*e.length)],a=e[e.indexOf(n)+t];return a||(a=e[e.length-1],n=e[e.indexOf(a)-t]),[n.key,a.key]},Ae=function(e){var t=e.settingsIsOpen,n=e.allIntervals,a=e.activeInterval,r=e.showAnswer,i=e.sequenceOfNotes,l=e.actionInverseChosenInterval,c=e.actionShowTheCorrectInterval,s=e.actionIncrementRightAnswers,u=e.actionIncrementAmountOfAnswers,d=e.actionShowNotesOnThePiano,p=e.intervalsKeyboardFlag,y=e.actionKeyboardSetIntervalButtonFlag,m=e.actionSetActiveKeyboardInterval,f=e.activeKeyboardInterval,h=[],v=[];t?h=Oe(v=n):(v=ge(n),h=Oe(ge(n)));var g=t?l:function(e){c();var t=a.name===e.name,n=t?"right":"wrong";t?(s(a.rusName),d({type:n,sequence:i})):(u(a.rusName),d({type:n,sequence:i}))};if(p.intervalButtonFlag){var O=v[p.interval];y(!1),m(O),r&&!t||setTimeout(function(){g(O)},150)}f&&f.hasOwnProperty("name")&&setTimeout(function(){m({})},150);var E=h.map(function(e,n){return o.a.createElement(he,{groupIndex:n,group:e,key:e[0].name,settingsIsOpen:t,intervalClickHandler:g,activeKeyboardInterval:f})});return o.a.createElement("div",{className:"listOfIntervals",style:r&&!t?{visibility:"hidden"}:null},E)},Se={actionInverseChosenInterval:function(e){return{type:"INVERSE_CHOSEN_INTERVAL",payload:e}},actionShowTheCorrectInterval:function(){return{type:"SHOW_THE_CORRECT_INTERVAL"}},actionIncrementRightAnswers:ce,actionIncrementAmountOfAnswers:se,actionShowNotesOnThePiano:ye,actionKeyboardSetIntervalButtonFlag:B,actionSetActiveKeyboardInterval:function(e){return{type:"SET_ACTIVE_KEYBOARD_INTERVAL",payload:e}}},be=Object(I.b)(function(e){var t=e.intervals,n=e.application;return{settingsIsOpen:t.settingsIsOpen,allIntervals:t.allIntervals,activeInterval:t.activeInterval,showAnswer:t.showAnswer,sequenceOfNotes:t.sequenceOfNotes,activeKeyboardInterval:t.activeKeyboardInterval,intervalsKeyboardFlag:n.intervalsKeyboardFlag}},Se)(Ae),Ie=function(e){var t=e.play;return o.a.createElement(L,null,o.a.createElement("div",{className:"intervals"},o.a.createElement(fe,{play:t}),o.a.createElement(be,null)))},Te=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={status:""},n.onMIDIOnStateChange=function(e){n.setState({status:e.port.manufacturer+" "+e.port.name+" "+e.port.state})},n.requestMIDIAccessSuccess=function(e){for(var t=e.inputs.values(),a=t.next();a&&!a.done;a=t.next())a.value.onmidimessage=n.midiOnMIDImessage;e.onstatechange=n.onMIDIOnStateChange},n.requestMIDIAccessFailure=function(){n.setState({status:"MIDI Access Failure"})},n.midiOnMIDImessage=function(e){var t=e.data[2],a=e.data[0],o=e.data[1],r=n.props.sliceArr;if(o>=r[0].key&&o<=r[r.length-1].key){var i={sequence:[o],type:"active"};144===a&&0!==t?(n.props.actionShowNotesOnThePiano(i),n.props.play(o)):128!==a&&0!==t||n.props.actionUpdatePianoKeys()}},n.startListening=function(){n.setState({status:"waiting"}),navigator.requestMIDIAccess?navigator.requestMIDIAccess({sysex:!0}).then(n.requestMIDIAccessSuccess,n.requestMIDIAccessFailure):n.setState({status:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043c\u0438\u0434\u0438-\u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0443"})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"activate-midi"},o.a.createElement(O,{cls:"primary",onClick:this.startListening},"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c MIDI \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443"),o.a.createElement("p",{style:{marginTop:"20px",marginBottom:"20px"}},o.a.createElement("b",null,"\u0421\u0442\u0430\u0442\u0443\u0441 midi:")," ",this.state.status?this.state.status:"\u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0430"))}}]),t}(a.Component),we={actionShowNotesOnThePiano:ye,actionUpdatePianoKeys:pe},Fe=Object(I.b)(function(e){return{sliceArr:e.piano.sliceArr}},we)(Te),Ce=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).setVisualEffect=function(e){var t=e.right,a=e.note,o=[n.props.playNote.key];t?n.setRightVisualEffect({sequence:o}):n.setWrongVisualEffect({sequence:o,note:a})},n.setRightVisualEffect=function(e){var t={sequence:e.sequence,type:"right"};n.props.actionShowNotesOnThePiano(t),setTimeout(function(){n.props.actionUpdatePianoKeys(),n.props.actionHideAnswer()},2e3)},n.setWrongVisualEffect=function(e){var t={sequence:e.sequence,type:"wrong"},a={sequence:[e.note],type:"right"};n.props.actionShowNotesOnThePiano(t),n.props.actionShowNotesOnThePiano(a),setTimeout(function(){n.props.actionUpdatePianoKeys(),n.props.actionHideAnswer()},1500)},n.playButtonHandler=function(){var e=n.props.note;n.props.play(e),n.setMode(!1)},n.answerButtonHandler=function(){n.setMode(!0)},n.setMode=function(e){n.props.needToWriteNote!==e&&n.props.actionNeedToWriteNote(e)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.actionSetActiveNote(this.props.sliceArr),this.props.actionSetMode({mode:"\u0418\u0441\u043a\u0430\u0442\u044c \u043d\u043e\u0442\u0443",stat:!0}),this.props.actionUpdatePianoKeys(),this.props.playFlag&&this.props.actionKeyboardSetPlayFlag(!1),this.props.changeModeFlag&&this.props.actionKeyboardSetChangeModeFlag(!1)}},{key:"componentWillUnmount",value:function(){this.props.actionStatisticsClearing(),this.props.playFlag&&this.props.actionKeyboardSetPlayFlag(!1),this.props.changeModeFlag&&this.props.actionKeyboardSetChangeModeFlag(!1)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.needToWriteNote,a=t.playNote,o=t.note,r=t.actionIncrementRightAnswers,i=t.actionIncrementAmountOfAnswers,l=t.actionSetActiveNote,c=t.playFlag,s=t.actionKeyboardSetPlayFlag,u=t.changeModeFlag,d=t.actionKeyboardSetChangeModeFlag,p=t.sliceArr;e.needToWriteNote&&!n&&(null!==a&&(a.key===o?(r(),this.setVisualEffect({right:!0})):(i(),this.setVisualEffect({right:!1,note:o})),l(p)));c&&(this.playButtonHandler(),setTimeout(function(){s(!1)},300)),u&&(this.setMode(!n),d(!1))}},{key:"render",value:function(){var e=this.props,t=e.needToWriteNote,n=e.playFlag,a=this.playButtonHandler,r=this.answerButtonHandler,i=[t?"secondary-outline":"info"];return n&&i.push("active"),o.a.createElement(L,null,o.a.createElement("div",{className:"findNote"},o.a.createElement(N,{cls:"horizontal"},o.a.createElement(O,{cls:i.join(" "),onClick:a},"\u0418\u0433\u0440\u0430\u0442\u044c \u043d\u043e\u0442\u0443"),o.a.createElement(O,{cls:t?"info":"secondary-outline",onClick:r},"\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c"))))}}]),t}(a.Component),Me={actionStatisticsClearing:ue,actionSetActiveNote:function(e){return{type:"SET_ACTIVE_NOTE",sliceArr:e}},actionIncrementRightAnswers:ce,actionIncrementAmountOfAnswers:se,actionNeedToWriteNote:F,actionShowNotesOnThePiano:ye,actionHideAnswer:de,actionSetMode:M,actionUpdatePianoKeys:pe,actionKeyboardSetPlayFlag:K,actionKeyboardSetChangeModeFlag:H},Ke=Object(I.b)(function(e){var t=e.statistics,n=e.notes,a=e.piano,o=e.application;return{statistics:t,note:n.note,sliceArr:a.sliceArr,playNote:o.playNote,needToWriteNote:o.needToWriteNote,playFlag:o.playFlag,changeModeFlag:o.changeModeFlag}},Me)(Ce),_e=(n(69),function(e){var t=e.playGuessedMelody,n=e.playWrittenMelody,a=e.playFlag,r=e.playWrittenMelodyFlag,i=["secondary-outline"],l=["secondary-outline"];return a&&i.push("active"),r&&l.push("active"),o.a.createElement(N,{cls:"horizontal"},o.a.createElement(O,{cls:i.join(" "),onClick:t},"\u0418\u0433\u0440\u0430\u0442\u044c \u0443\u0433\u0430\u0434\u044b\u0432\u0430\u0435\u043c\u0443\u044e \u043c\u0435\u043b\u043e\u0434\u0438\u044e"),o.a.createElement(O,{cls:l.join(" "),onClick:n},"\u0418\u0433\u0440\u0430\u0442\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u0443\u044e \u043c\u0435\u043b\u043e\u0434\u0438\u044e"))});_e.defaultProps={playWrittenMelodyFlag:!1};var ke=_e,He=function(e){var t=e.modeWrite,n=e.changeMode,a=e.clearButtonHandler,r=e.checkAnswerHandler,i=e.readyToCheck,l=e.answerGiven,c=e.nextPlayButtonHandler,s=e.settingsButtonHandler,u=i&&!l,d=["secondary-outline"];return e.dictationClearNoteFlag&&d.push("active"),o.a.createElement("div",{className:"dictation-options-buttons"},o.a.createElement(N,{cls:"horizontal"},o.a.createElement(O,{onClick:c,cls:t?"info-outline":"info active",disabled:!t},l?"\u0414\u0430\u043b\u0435\u0435":"\u0418\u0433\u0440\u0430\u0442\u044c"),l?null:o.a.createElement(O,{onClick:n,cls:t?"info active":"info-outline",disabled:!!t},"\u041f\u0438\u0441\u0430\u0442\u044c")),o.a.createElement(N,{cls:"horizontal"},o.a.createElement(O,{onClick:a,cls:d.join(" ")},"\u0421\u0442\u0435\u0440\u0435\u0442\u044c"),o.a.createElement(O,{onClick:r,cls:u?"danger":"danger-outline",disabled:!u},"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c")),o.a.createElement(O,{cls:"primary",onClick:s},"\u041d\u0430\u0441\u0442\u0440\u043e\u043a\u0438"))},We=function(e){var t=e.elem,n=e.index,a=e.rightAnswer,r=e.answerGiven,i=e.rightElem,l=r?a?"right":"wrong":"",c=r?a?null:o.a.createElement("span",{className:"right"},"\xa0",i?"".concat(i.octaveName," - ").concat(i.fullName):" ?"):null;return o.a.createElement("p",{className:"dictation-output-element"},o.a.createElement("span",{className:"index-output-element"},"".concat(n+1," \u043d\u043e\u0442\u0430:")),"\xa0",o.a.createElement("span",{className:l},t?"".concat(t.octaveName," - ").concat(t.fullName):" ?"),c)},je=function(e){for(var t=e.amountOfNotes,n=e.sequenceOfMelody,a=e.sequenceOfWrittenMelody,r=e.answerGiven,i=e.answers,l=[],c=0;c<t;c++){var s=a[c],u=n[c],d=o.a.createElement(We,{elem:s,index:c,answerGiven:r,rightAnswer:i[c],rightElem:u,key:c});l.push(d)}return o.a.createElement("div",{className:"dictation-output"},o.a.createElement("h3",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0442\u0433\u0430\u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u043e\u0442:"),l)},Be=(n(70),function(e){var t=e.onChange,n=e.children,a=e.value;return o.a.createElement("select",{className:"select",value:a,onChange:t},n)}),xe=[3,4,5,6,7].map(function(e){return o.a.createElement("option",{value:e,key:e},e)}),De=function(e){var t=e.value,n=e.onChange;return o.a.createElement(Be,{onChange:n,value:t},xe)},Re=[{modePlay:!1,ru:"\u0418\u0433\u0440\u0430\u0442\u044c"},{modePlay:!0,ru:"\u041f\u0438\u0441\u0430\u0442\u044c"}].map(function(e){return o.a.createElement("option",{value:e.modePlay,key:e.ru},e.ru)}),Le=function(e){var t=e.value,n=e.onChange;return o.a.createElement(Be,{onChange:n,value:t},Re)},Pe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={amountOfNotes:4,defaultModeWrite:!1,modeWrite:!1},n.selectAmountOfNotesHandler=function(e){n.setState({amountOfNotes:+e.target.value})},n.selectModesHandler=function(e){var t,a,o=e.target.value;"true"===o&&(t=!0,a=!0),"false"===o&&(t=!1,a=!1),n.setState({defaultModeWrite:t,modeWrite:a})},n.saveButtonHandler=function(){n.props.actionChangeSettings(n.state)},n.cancelButtonHandler=function(){n.setState({amountOfNotes:n.props.amountOfNotes,defaultModeWrite:n.props.defaultModeWrite})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.amountOfNotes,n=e.defaultModeWrite;this.setState({amountOfNotes:t,defaultModeWrite:n})}},{key:"render",value:function(){var e=this.props.settingsButtonHandler,t=this.state,n=t.amountOfNotes,a=t.defaultModeWrite,r=this.selectAmountOfNotesHandler,i=this.selectModesHandler,l=this.saveButtonHandler,c=this.cancelButtonHandler;return o.a.createElement(A,{close:e,saveButton:!0,saveButtonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",cancelButton:!0,cancelButtonName:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",saveButtonHandler:l,cancelButtonHandler:c},o.a.createElement("h3",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u0438\u043a\u0442\u0430\u043d\u0442\u0430"),o.a.createElement("h4",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u0442:"),o.a.createElement(De,{value:n,onChange:r}),o.a.createElement("h4",null,"\u0420\u0435\u0436\u0438\u043c \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e:"),o.a.createElement(Le,{value:a,onChange:i}))}}]),t}(a.Component),qe={actionChangeSettings:function(e){return{type:"CHANGE_SETTINGS",payload:e}}},Ge=Object(I.b)(function(e){var t=e.dictation;return{amountOfNotes:t.amountOfNotes,defaultModeWrite:t.defaultModeWrite}},qe)(Pe),Ue=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).setNewMelody=function(){n.props.actionGetNewMelody(n.props.sliceArr)},n.clearAnswers=function(){n.props.actionWriteAnswers([])},n.playGuessedMelody=function(){var e=n.props.dictation.sequenceOfMelody.map(function(e){return e.key});n.playMelody(e)},n.playWrittenMelody=function(){var e=n.getKeysArrayOfMeloday(n.props.dictation.sequenceOfWrittenMelody);n.playMelody(e)},n.playMelody=function(e){for(var t=function(t){e[t]&&setTimeout(function(){n.props.play(e[t],!0)},1e3*n.props.duration*t)},a=0;a<e.length;a++)t(a)},n.changeMode=function(e,t){t="boolean"===typeof t?t:!n.props.dictation.modeWrite,n.props.actionChangeMode(t),n.props.actionNeedToWriteNote(t)},n.clearButtonHandler=function(){n.props.dictation.sequenceOfWrittenMelody.length>0&&n.props.actionPopLastElemFromAnswerArray()},n.checkAnswerHandler=function(){var e=n.getKeysArrayOfMeloday(n.props.dictation.sequenceOfMelody),t=n.getKeysArrayOfMeloday(n.props.dictation.sequenceOfWrittenMelody);if(e.length===t.length){var a=n.getArrayOfEqualsOfAnswers(e,t);n.changeStat(a),n.props.actionWriteAnswers(a)}},n.getKeysArrayOfMeloday=function(e){return e.map(function(e){return e.key})},n.getArrayOfEqualsOfAnswers=function(e,t){for(var n=[],a=0;a<e.length;a++)n.push(e[a]===t[a]);return n},n.changeStat=function(e){-1===e.indexOf(!1)?n.props.actionIncrementRightAnswers():n.props.actionIncrementAmountOfAnswers()},n.nextButtonHandler=function(){n.setNewMelody(),n.clearAnswers(),n.props.actionClearWrittenMelody(),n.props.actionHideAnswer()},n.settingsButtonHandler=function(){n.props.actionSetModalWindowFlag(!n.props.modalWindowFlag)},n.nextPlayButtonHandler=function(){n.changeMode(),n.props.dictation.answerGiven&&n.nextButtonHandler()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dictation.defaultModeWrite;this.props.actionWritePlayNote(null,!1),this.changeMode(null,e),this.props.needToWriteNote!==e&&this.props.actionNeedToWriteNote(e),this.setNewMelody(),this.props.actionInitDictation(!0),this.props.actionSetMode({mode:"\u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0438\u043a\u0442\u0430\u043d\u0442",stat:!0}),this.props.actionUpdatePianoKeys(),this.props.actionClearWrittenMelody(),this.clearAnswers(),this.props.playFlag&&this.props.actionKeyboardSetPlayFlag(!1),this.props.playWrittenMelodyFlag&&this.props.actionKeyboardSetPlayWrittenMelodyFlag(!1),this.props.changeModeFlag&&this.props.actionKeyboardSetChangeModeFlag(!1),this.props.modalWindowFlag&&this.props.actionSetModalWindowFlag(!1),this.props.dictationClearNoteFlag&&this.props.actionSetModalWindowFlag(!1),this.props.dictationCheckFlag&&this.props.actionKeyboardSetDictationCheckFlag(!1)}},{key:"componentWillUnmount",value:function(){this.props.actionInitDictation(!1),this.clearAnswers(),this.props.actionStatisticsClearing(),this.props.actionClearWrittenMelody(),this.props.modalWindowFlag&&this.props.actionSetModalWindowFlag(!1),this.props.playFlag&&this.props.actionKeyboardSetPlayFlag(!1),this.props.playWrittenMelodyFlag&&this.props.actionKeyboardSetPlayWrittenMelodyFlag(!1),this.props.changeModeFlag&&this.props.actionKeyboardSetChangeModeFlag(!1),this.props.dictationClearNoteFlag&&this.props.actionSetModalWindowFlag(!1),this.props.dictationCheckFlag&&this.props.actionKeyboardSetDictationCheckFlag(!1)}},{key:"componentDidUpdate",value:function(e){var t=this.props.dictation,n=t.sequenceOfWrittenMelody,a=t.amountOfNotes,o=t.answerGiven,r=t.readyToCheck,i=this.props,l=i.playNote,c=i.playFlag,s=i.actionKeyboardSetPlayFlag,u=i.playWrittenMelodyFlag,d=i.actionKeyboardSetPlayWrittenMelodyFlag,p=i.changeModeFlag,y=i.dictationClearNoteFlag,m=i.actionKeyboardSetDictationClearNoteFlag,f=i.dictationCheckFlag,h=i.actionKeyboardSetDictationCheckFlag;e.dictation.amountOfNotes!==a&&this.setNewMelody(),n.length<a&&l&&(e.playNote&&l.id!==e.playNote.id||null===e.playNote&&null!==l)&&this.props.actionAddNoteToAnswerArray(l),c&&(this.playGuessedMelody(),setTimeout(function(){s(!1)},300)),u&&(this.playWrittenMelody(),setTimeout(function(){d(!1)},300)),p&&(this.props.actionKeyboardSetChangeModeFlag(!1),this.nextPlayButtonHandler()),y&&(this.clearButtonHandler(),setTimeout(function(){m(!1)},300)),f&&(h(!1),f&&r&&!o&&(this.checkAnswerHandler(),setTimeout(function(){},300)))}},{key:"render",value:function(){var e=this.props.dictation.modeWrite||!1,t=this.props.needToWriteNote,n=this.props.dictation,a=n.amountOfNotes,r=n.sequenceOfMelody,i=n.sequenceOfWrittenMelody,l=n.answerGiven,c=n.answers,s=n.readyToCheck,u=this.props,d=u.playFlag,p=u.playWrittenMelodyFlag,y=u.dictationClearNoteFlag,m=this.nextPlayButtonHandler,f=this.settingsButtonHandler;return o.a.createElement(L,null,o.a.createElement("div",null,o.a.createElement(ke,{playGuessedMelody:this.playGuessedMelody,playWrittenMelody:this.playWrittenMelody,playFlag:d,playWrittenMelodyFlag:p}),o.a.createElement(He,{modeWrite:e,changeMode:this.changeMode,clearButtonHandler:this.clearButtonHandler,checkAnswerHandler:this.checkAnswerHandler,sequenceOfWrittenMelody:i,amountOfNotes:a,answerGiven:l,nextPlayButtonHandler:m,settingsButtonHandler:f,dictationClearNoteFlag:y,readyToCheck:s}),o.a.createElement(je,{amountOfNotes:a,needToWriteNote:t,sequenceOfMelody:r,sequenceOfWrittenMelody:i,answerGiven:l,answers:c}),this.props.modalWindowFlag?o.a.createElement(Ge,{settingsButtonHandler:f}):null))}}]),t}(a.Component),Ye={actionGetNewMelody:function(e){return{type:"GET_NEW_MELODY",sliceArr:e}},actionChangeMode:function(e){return{type:"CHANGE_MODE",payload:e}},actionNeedToWriteNote:F,actionInitDictation:function(e){return{type:"INIT_DICTATION",payload:e}},actionAddNoteToAnswerArray:function(e){return{type:"ADD_NOTE_TO_ANSWER_ARRAY",payload:e}},actionWritePlayNote:C,actionPopLastElemFromAnswerArray:function(){return{type:"POP_LAST_ELEM_FROM_ANSWER_ARRAY"}},actionWriteAnswers:function(e){return{type:"WRITE_ANSWERS",payload:e}},actionStatisticsClearing:ue,actionIncrementRightAnswers:ce,actionIncrementAmountOfAnswers:se,actionClearWrittenMelody:function(){return{type:"CLEAR_WRITTEN_MELODY"}},actionHideAnswer:de,actionSetMode:M,actionUpdatePianoKeys:pe,actionSetModalWindowFlag:_,actionKeyboardSetPlayFlag:K,actionKeyboardSetPlayWrittenMelodyFlag:k,actionKeyboardSetChangeModeFlag:H,actionKeyboardSetDictationClearNoteFlag:W,actionKeyboardSetDictationCheckFlag:j},Ve=Object(I.b)(function(e){var t=e.piano,n=e.dictation,a=e.application;return{sliceArr:t.sliceArr,dictation:n,needToWriteNote:a.needToWriteNote,playNote:a.playNote,duration:a.duration,modalWindowFlag:a.modalWindowFlag,playFlag:a.playFlag,playWrittenMelodyFlag:a.playWrittenMelodyFlag,changeModeFlag:a.changeModeFlag,dictationClearNoteFlag:a.dictationClearNoteFlag,dictationCheckFlag:a.dictationCheckFlag}},Ye)(Ue),Xe=function(e){var t=e.actionSetMode,n=e.actionUpdatePianoKeys;return t({mode:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u0430\u044f \u0438\u0433\u0440\u0430",stat:!1}),n(),o.a.createElement("div",{className:"free-mode"})},ze={actionSetMode:M,actionUpdatePianoKeys:pe},Je=Object(I.b)(function(){return{}},ze)(Xe),Qe=function(e){var t=e.index,n=e.fullName,a=e.disabled;return o.a.createElement("option",{disabled:a,value:t},n)};Qe.defaultProps={disabled:!1};var Ze=Qe,$e=n(4),et=n.n($e),tt=function(e){var t=e.baseArrOfNotes,n=e.firstBorder,a=e.secondBorder,r=e.nameOfSelect,i=e.minAmountOfNotes;return t.map(function(e){var t=e.fullName,l=e.key,c=e.index,s=!1;return"firstBorder"===r?l>a.key-i&&(s=!0):l<n.key+i&&(s=!0),o.a.createElement(Ze,{disabled:s,fullName:t,index:c,key:l})})};tt.propType={minAmountOfNotes:et.a.number.isRequired,firstBorder:et.a.shape({index:et.a.number.isRequired,key:et.a.number.isRequired}),secondBorder:et.a.shape({index:et.a.number.isRequired,key:et.a.number.isRequired}),nameOfSelect:et.a.string.isRequired,baseArrOfNotes:et.a.arrayOf(et.a.object.isRequired)};for(var nt=tt,at=function(e){var t=e.nameOfSelect,n=e.baseArrOfNotes,a=e.minAmountOfNotes,r=e.actionSetBordersOfRange,i=e.firstBorder,l=e.secondBorder,c="firstBorder"===t?i.index:l.index;return o.a.createElement(Be,{value:c,onChange:function(e){!function(e,t){var a=+e.target.value,o=n[a].key;"firstBorder"===t?i={index:a,key:o}:l={index:a,key:o},r([i,l])}(e,t)}},o.a.createElement(nt,{minAmountOfNotes:a,firstBorder:i,secondBorder:l,nameOfSelect:t,baseArrOfNotes:n}))},ot=function(e){var t=e.actionUpdatePianoKeys,n=e.actionSetBordersOfRange,a=e.piano,r=a.firstBorder,i=a.secondBorder,l=a.baseArrOfNotes,c=a.minAmountOfNotes;return o.a.createElement("div",{className:"changeRangeOfNotes"},o.a.createElement("h3",null,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d:"),o.a.createElement(at,{firstBorder:r,secondBorder:i,nameOfSelect:"firstBorder",actionSetBordersOfRange:n,baseArrOfNotes:l,minAmountOfNotes:c}),o.a.createElement(at,{firstBorder:r,secondBorder:i,nameOfSelect:"secondBorder",actionSetBordersOfRange:n,baseArrOfNotes:l,minAmountOfNotes:c}),o.a.createElement(O,{onClick:function(){t()}},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d"))},rt={actionSetBordersOfRange:function(e){return{type:"SET_BORDERS_OF_RANGE",payload:{firstBorder:e[0],secondBorder:e[1]}}},actionUpdatePianoKeys:pe},it=Object(I.b)(function(e){return{piano:e.piano}},rt)(ot),lt=(n(71),function(e){var t=e.play,n=e.duration;return o.a.createElement(O,{onClick:function(){for(var e=[60,64,67,72],a=function(a){setTimeout(function(){t(e[a])},1e3*n*a)},o=0;o<e.length;o++)a(o)}},"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u043f\u0440\u0438\u043c\u0435\u0440")}),ct=(n(72),function(e){var t,n=e.level,a=e.onChangeHandler,r=e.min,i=e.max,l=e.step,c=(n-r)/(i-r);return t=c<.35?{left:"calc(-8px  + 100% * ".concat(c," - 10px * ").concat(c," )")}:c>.85?{left:"calc(-12px * ".concat(c||1," + 100% * ").concat(c," - 11px * ").concat(c," )")}:c>.65?{left:"calc(-14px * ".concat(c||1," + 100% * ").concat(c," - 11px * ").concat(c," )")}:{left:"calc(-18px * ".concat(c||1," + 100% * ").concat(c," - 11px * ").concat(c," )")},o.a.createElement("div",{className:"input-range-wrap"},o.a.createElement("div",{className:"input-range-value",style:t},n),o.a.createElement("input",{type:"range",min:r,max:i,step:l,onChange:a,value:n}))}),st=function(e){var t=e.children,n=e.echoLevel,a=e.actionSetEchoLevel;return o.a.createElement("div",{className:"input-settings"},o.a.createElement("h3",null,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u044d\u0445\u043e:"),o.a.createElement("div",{className:"input-settings-wrap"},o.a.createElement(ct,{min:0,max:1,step:.1,level:n,onChangeHandler:function(e){a(+e.target.value)}}),t))},ut=function(e){var t=e.children,n=e.bpm,a=e.actionSetBpmLevel;return o.a.createElement("div",{className:"input-settings"},o.a.createElement("h3",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u043a\u0430 \u0442\u0435\u043c\u043f\u0430 (bpm):"),o.a.createElement("div",{className:"input-settings-wrap"},o.a.createElement(ct,{min:50,max:180,step:1,level:n,onChangeHandler:function(e){a(+e.target.value)}}),t))},dt=[{id:1,name:"Acoustic Grand Piano"},{id:45,name:"Electric Piano"},{id:117,name:"Vibraphone"},{id:125,name:"Marimba"},{id:141,name:"Tubular Bells"},{id:183,name:"Rock Organ"},{id:190,name:"Church Organ"},{id:223,name:"Harmonica"},{id:246,name:"Acoustic Guitar (nylon)"},{id:258,name:"Acoustic Guitar (steel)"},{id:291,name:"Electric Guitar (clean)"},{id:322,name:"Overdriven Guitar"},{id:333,name:"Distortion Guitar"},{id:447,name:"Violin"},{id:582,name:"Choir Aahs"}],pt=function(e){var t=e.children,n=e.actionSetInstrumentId,a=e.instrumentId,r=dt.map(function(e,t){return o.a.createElement(Ze,{index:e.id,fullName:"".concat(t+1,") ").concat(e.name),disabled:!1,key:e.id})});return o.a.createElement("div",{className:"input-settings"},o.a.createElement("h3",null,"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442:"),o.a.createElement("div",{className:"input-settings-wrap"},o.a.createElement(Be,{onChange:function(e){n(+e.target.value)},value:a},r),t))},yt=function(e){var t=e.hotKeys,n=e.actionKeyboardSetNewHotKeyFlag,a=e.title,r=e.hotKeyType,i=e.index,l=t.newHotKey.newHotKeyType,c="listOfIntervalsHotKeys"===r?t[r][i]:t[r],s=t.newHotKey.change&&l===r&&i===t.newHotKey.index,u=" "===c?"Space":null===c?"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d\u043e":c,d=s?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0436\u0435\u043b\u0430\u0435\u043c\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0448\u0443":'\u041a\u043b\u0430\u0432\u0438\u0448\u0430: "'.concat(u,'"'),p=s?"info":"info-outline";return o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",null,a),o.a.createElement("p",null,o.a.createElement(O,{onClick:function(){n({change:!0,newHotKeyType:r,index:i,key:null})},type:"text",cls:p},d),s?o.a.createElement("span",null,'\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:\xa0"',u,'"'):null))},mt=(n(73),function(e){var t=e.hotKeys,n=e.actionKeyboardSetNewHotKeyFlag,a=t.listOfIntervalsHotKeys.map(function(e,a){return o.a.createElement(yt,{key:"".concat(e,"-").concat(Date.now(),"-").concat(a),title:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u043a\u043b\u0430\u0432\u0438\u0448\u0430 ".concat(a+1,"-\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430 \u0441\u043f\u0438\u0441\u043a\u0430:"),hotKeys:t,actionKeyboardSetNewHotKeyFlag:n,hotKeyType:"listOfIntervalsHotKeys",index:a})});return o.a.createElement("div",{className:"keyboard-settings"},o.a.createElement("h3",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0433\u043e\u0440\u044f\u0447\u0438\u0445 \u043a\u043b\u0430\u0432\u0438\u0448:"),o.a.createElement(yt,{title:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c/\u0437\u0430\u043a\u0440\u044b\u0442\u044c \u043c\u0435\u043d\u044e \u0438\u043b\u0438 \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0435\u0435 \u043e\u043a\u043d\u043e:",hotKeys:t,actionKeyboardSetNewHotKeyFlag:n,hotKeyType:"closeHotKey",index:null}),o.a.createElement(yt,{title:"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0434\u0430\u043d\u0438\u0435:",hotKeys:t,actionKeyboardSetNewHotKeyFlag:n,hotKeyType:"playHotKey",index:null}),o.a.createElement(yt,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0435\u0436\u0438\u043c \u0432 \u0437\u0430\u0434\u0430\u043d\u0438\u0438:",hotKeys:t,actionKeyboardSetNewHotKeyFlag:n,hotKeyType:"changeModeHoteKey",index:null}),o.a.createElement(yt,{title:"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u0443\u044e \u043c\u0435\u043b\u043e\u0434\u0438\u044e (\u0434\u0438\u043a\u0442\u0430\u043d\u0442):",hotKeys:t,actionKeyboardSetNewHotKeyFlag:n,hotKeyType:"playWrittenMelodyHoteKey",index:null}),o.a.createElement(yt,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u0443\u044e \u043d\u043e\u0442\u0443 (\u0434\u0438\u043a\u0442\u0430\u043d\u0442):",hotKeys:t,actionKeyboardSetNewHotKeyFlag:n,hotKeyType:"dictationClearNoteHoteKey",index:null}),o.a.createElement(yt,{title:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442 (\u0434\u0438\u043a\u0442\u0430\u043d\u0442):",hotKeys:t,actionKeyboardSetNewHotKeyFlag:n,hotKeyType:"dictationCheckHoteKey",index:null}),a)}),ft=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.actionUpdatePianoKeys,n=e.actionSetMode;t(),n({mode:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",stat:!1})}},{key:"render",value:function(){var e=this.props,t=e.actionSetEchoLevel,n=e.echoLevel,a=e.bpm,r=e.actionSetBpmLevel,i=e.actionSetInstrumentId,l=e.instrumentId,c=e.hotKeys,s=e.actionKeyboardSetNewHotKeyFlag,u=o.a.createElement(lt,{play:this.props.play,duration:this.props.duration});return o.a.createElement(L,null,o.a.createElement("div",{className:"settings"},o.a.createElement(it,null),o.a.createElement(st,{actionSetEchoLevel:t,echoLevel:n},u),o.a.createElement(ut,{actionSetBpmLevel:r,bpm:a},u),o.a.createElement(pt,{actionSetInstrumentId:i,instrumentId:l},u),o.a.createElement(mt,{hotKeys:c,actionKeyboardSetNewHotKeyFlag:s}),o.a.createElement(R,{withTitle:!0})))}}]),t}(a.Component),ht={actionSetMode:M,actionUpdatePianoKeys:pe,actionSetEchoLevel:function(e){return{type:"SET_ECHO_LEVEL",payload:e}},actionSetBpmLevel:function(e){return{type:"SET_BPM_LEVEL",payload:e}},actionSetInstrumentId:function(e){return{type:"SET_INSTRUMENTID",payload:e}},actionKeyboardSetNewHotKeyFlag:x},vt=Object(I.b)(function(e){var t=e.application;return{duration:t.duration,echoLevel:t.echoLevel,bpm:t.bpm,hotKeys:t.hotKeys,instrumentId:t.instrumentId}},ht)(ft),gt=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).keyboardEventListener=function(e){var t=n.props.hotKeys;if(t.newHotKey.change)n.props.actionKeyboardSetNewHotKeyFlag({change:!1,newHotKeyType:n.props.hotKeys.newHotKey.newHotKeyType,index:n.props.hotKeys.newHotKey.index,key:e.key}),e.preventDefault();else{var a=t.listOfIntervalsHotKeys.indexOf(e.key);e.key===t.closeHotKey&&(n.props.modalWindowFlag?n.props.actionSetModalWindowFlag(!1):n.props.actionMenuAction(),e.preventDefault()),e.key!==t.playHotKey||n.props.playFlag||(n.props.actionKeyboardSetPlayFlag(!0),e.preventDefault()),e.key!==t.playWrittenMelodyHoteKey||n.props.playWrittenMelodyFlag||(n.props.actionKeyboardSetPlayWrittenMelodyFlag(!0),e.preventDefault()),e.key!==t.changeModeHoteKey||n.props.changeModeFlag||(n.props.actionKeyboardSetChangeModeFlag(!0),e.preventDefault()),e.key!==t.dictationClearNoteHoteKey||n.props.dictationClearNoteFlag||(n.props.actionKeyboardSetDictationClearNoteFlag(!0),e.preventDefault()),e.key!==t.dictationCheckHoteKey||n.props.dictationCheckFlag||(n.props.actionKeyboardSetDictationCheckFlag(!0),e.preventDefault()),-1===a||n.props.intervalsKeyboardFlag.intervalButtonFlag||(n.props.actionKeyboardSetIntervalButtonFlag(!0,a),e.preventDefault())}},n.play=function(e,t){var a=n.props,o=a.duration,r=a.instrumentId;if(n.midiSounds.playChordNow(r||1,[e],o),!t&&n.props.needToWriteNote){var i=n.props.sliceArr.find(function(t){return t.key===e});n.props.modeDictation?n.props.actionWritePlayNote(i,!0):n.props.actionWritePlayNote(i,!1)}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.midiSounds.setEchoLevel(this.props.echoLevel),document.getElementById("root").addEventListener("click",function(){e.props.menuIsOpen&&e.props.actionMenuAction(!1)}),document.body.onkeydown=this.keyboardEventListener,this.props.menuIsOpen&&this.props.actionMenuAction(),this.props.hotKeys.newHotKey.change&&this.props.actionKeyboardSetNewHotKeyFlag({change:!1,newHotKeyType:"",index:null,key:null})}},{key:"componentDidUpdate",value:function(e){e.echoLevel!==this.props.echoLevel&&this.midiSounds.setEchoLevel(this.props.echoLevel),e.instrumentId!==this.props.instrumentId&&this.midiSounds.playChordNow(this.props.instrumentId,[60],0)}},{key:"render",value:function(){var e=this,t=this.props.instrumentId;return o.a.createElement(L,null,o.a.createElement("div",{className:"app"},o.a.createElement(G,null),o.a.createElement(J,null),o.a.createElement(oe,{play:this.play}),o.a.createElement(m.c,null,o.a.createElement(m.a,{path:"/",exact:!0,render:function(){return o.a.createElement(Je,null)}}),o.a.createElement(m.a,{path:"/intervals",render:function(){return o.a.createElement(Ie,{play:e.play})}}),o.a.createElement(m.a,{path:"/find-note",render:function(){return o.a.createElement(Ke,{play:e.play})}}),o.a.createElement(m.a,{path:"/dictation",render:function(){return o.a.createElement(Ve,{play:e.play})}}),o.a.createElement(m.a,{path:"/options",render:function(){return o.a.createElement(vt,{play:e.play})}})),o.a.createElement(Fe,{play:this.play}),o.a.createElement("div",{className:"midiComponent",style:{display:"none"}},o.a.createElement(y.a,{ref:function(t){return e.midiSounds=t},appElementName:"root",instruments:[t||1]}))))}}]),t}(a.Component),Ot={actionMenuAction:w,actionWritePlayNote:C,actionKeyboardSetPlayFlag:K,actionSetModalWindowFlag:_,actionKeyboardSetPlayWrittenMelodyFlag:k,actionKeyboardSetChangeModeFlag:H,actionKeyboardSetDictationClearNoteFlag:W,actionKeyboardSetDictationCheckFlag:j,actionKeyboardSetIntervalButtonFlag:B,actionKeyboardSetNewHotKeyFlag:x},Et=Object(I.b)(function(e){var t=e.application,n=e.piano;return{menuIsOpen:t.menuIsOpen,note:t.note,needToWriteNote:t.needToWriteNote,modeDictation:t.modeDictation,echoLevel:t.echoLevel,duration:t.duration,modalWindowFlag:t.modalWindowFlag,playFlag:t.playFlag,playWrittenMelodyFlag:t.modalWindowFlag,changeModeFlag:t.changeModeFlag,instrumentId:t.instrumentId,dictationClearNoteFlag:t.dictationClearNoteFlag,dictationCheckFlag:t.dictationCheckFlag,intervalsKeyboardFlag:t.intervalsKeyboardFlag,hotKeys:t.hotKeys,sliceArr:n.sliceArr,mapIndex:n.mapIndex}},Ot)(gt),Nt=n(19),At=n(13),St={menuIsOpen:!1,playNote:null,needToWriteNote:!1,modeDictation:!1,mode:"",stat:!0,echoLevel:.3,bpm:80,duration:.75,instrumentId:1,dataIsClearing:!1,playFlag:!1,playWrittenMelodyFlag:!1,modalWindowFlag:!1,changeModeFlag:!1,dictationClearNoteFlag:!1,dictationCheckFlag:!1,intervalsKeyboardFlag:{intervalButtonFlag:!1,interval:0},hotKeys:{newHotKey:{change:!1,newHotKeyType:"",index:null,key:null},closeHotKey:"Escape",playHotKey:"Enter",playWrittenMelodyHoteKey:"+",changeModeHoteKey:" ",dictationClearNoteHoteKey:"Backspace",dictationCheckHoteKey:"-",listOfIntervalsHotKeys:["1","2","3","4","5","6","7","8","9","0","/","*"]}},bt=[],It=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],Tt={0:"\u0421\u0443\u0431\u043a\u043e\u043d\u0442\u0440\u043e\u043a\u0442\u0430\u0432\u0430",1:"\u041a\u043e\u043d\u0442\u0440\u043e\u043a\u0442\u0430\u0432\u0430",2:"\u0411\u043e\u043b\u044c\u0448\u0430\u044f \u043e\u043a\u0442\u0430\u0432\u0430",3:"\u041c\u0430\u043b\u0430\u044f \u043e\u043a\u0442\u0430\u0432\u0430",4:"\u041f\u0435\u0440\u0432\u0430\u044f \u043e\u043a\u0442\u0430\u0432\u0430",5:"\u0412\u0442\u043e\u0440\u0430\u044f \u043e\u043a\u0442\u0430\u0432\u0430",6:"\u0422\u0440\u0435\u0442\u044c\u044f \u043e\u043a\u0442\u0430\u0432\u0430",7:"\u0427\u0435\u0442\u0432\u0435\u0440\u0442\u0430\u044f \u043e\u043a\u0442\u0430\u0432\u0430",8:"\u041f\u044f\u0442\u0430\u044f \u043e\u043a\u0442\u0430\u0432\u0430"},wt=21,Ft=108,Ct=0,Mt=0;Mt<=Ft-wt;Mt++){var Kt=It[Mt%It.length];"C"===Kt&&Ct++,bt.push({index:Mt,key:Mt+wt,name:Kt,fullName:Kt+Ct,octaveName:Tt[Ct]})}function _t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft-wt;return[].concat(bt).slice(e,t+1)}function kt(e){for(var t={},n=[],a=0;a<e.length;a++){var o=e[a],r=e[a+1],i=n.length,l=[];l.push(Ht(o)),t[e[a].key]={i:i,j:0},r&&r.name.includes("#")&&(l.push(Ht(r)),t[e[++a].key]={i:i,j:1}),n.push(l)}return{mapIndex:t,arrOfNotes:n}}function Ht(e){return Object(T.a)({},e,{active:!1,wrong:!1,right:!1})}var Wt=function(e){var t=e.key,n=e.mapIndex[t];return{i:n.i,j:n.j}};window.getIndexes=Wt;var jt=function(e){var t=e.arrOfNotes,n=e.sequence,a=e.type,o=e.active,r=e.mapIndex,i=Object(At.a)(t);return n.forEach(function(e){var t=Wt({key:e,mapIndex:r}),n=t.i,l=t.j;o?i[n][l][a]=!0:a?i[n][l][a]=!1:(i[n][l].right=!1,i[n][l].wrong=!1)}),i},Bt=_t(),xt=kt(Bt),Dt=xt.arrOfNotes,Rt=xt.mapIndex,Lt=ve.map(function(e){return e.numberOfSemitones}),Pt=Math.max.apply(null,Lt),qt={baseArrOfNotes:Bt,arrOfNotes:Dt,mapIndex:Rt,firstBorder:{index:0,key:Bt[0].key},secondBorder:{index:Bt.length-1,key:Bt[Bt.length-1].key},sliceArr:Bt,minAmountOfNotes:Pt},Gt=Object(At.a)(ve),Ut=function(e){return function(e){return e[Math.floor(Math.random()*e.length)]}(ge(e))},Yt={allIntervals:Gt,typeOfInterval:"melodicUp",activeInterval:null,nextActiveInterval:"",sequenceOfNotes:[],settingsIsOpen:!1,showAnswer:!1,activeKeyboardInterval:{}},Vt={nameOfInterval:"",rightAnswers:0,amountOfAnswers:0,right:!1,showAnswer:!1},Xt={note:null},zt={amountOfNotes:4,sequenceOfMelody:[],sequenceOfWrittenMelody:[],readyToCheck:!1,defaultModeWrite:!1,answers:[],answerGiven:!1},Jt=Object(Nt.b)({application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENU_ACTION":var n=e.menuIsOpen,a=t.payload.isOpen;return n="boolean"===typeof a?a:!n,Object(T.a)({},e,{menuIsOpen:n});case"NEED_TO_WRITE_NOTE":return Object(T.a)({},e,{needToWriteNote:t.payload||!1,playNote:null});case"WRITE_PLAY_NOTE":return Object(T.a)({},e,{playNote:Object(T.a)({},t.payload),needToWriteNote:t.needToWriteNote});case"INIT_DICTATION":return Object(T.a)({},e,{modeDictation:t.payload});case"SET_MODE":return Object(T.a)({},e,t.payload);case"SET_ECHO_LEVEL":return Object(T.a)({},e,{echoLevel:t.payload});case"SET_BPM_LEVEL":var o=t.payload,r=60/o;return Object(T.a)({},e,{bpm:o,duration:r});case"SET_INSTRUMENTID":return Object(T.a)({},e,{instrumentId:t.payload});case"SET_MODAL_WINDOW_FLAG":return Object(T.a)({},e,{modalWindowFlag:t.payload});case"DATA_CLEARING_FLAG":return Object(T.a)({},e,{dataIsClearing:t.payload});case"KEYBOARD_SET_PLAY_FLAG":return Object(T.a)({},e,{playFlag:t.payload});case"KEYBOARD_SET_PLAY_WRITTEN_MELODY_FLAG":return Object(T.a)({},e,{playWrittenMelodyFlag:t.payload});case"KEYBOARD_SET_CHANGE_MODE_FLAG":return Object(T.a)({},e,{changeModeFlag:t.payload});case"KEYBOARD_SET_DICTATION_CLEAR_NOTE_FLAG":return Object(T.a)({},e,{dictationClearNoteFlag:t.payload});case"KEYBOARD_SET_DICTATION_CHECK_FLAG":return Object(T.a)({},e,{dictationCheckFlag:t.payload});case"KEYBOARD_SET_INTERVAL_BUTTON_FLAG":return Object(T.a)({},e,{intervalsKeyboardFlag:t.payload});case"KEYBOARD_SET_NEW_HOT_KEY_FLAG":var i=t.payload,l=Object(T.a)({},e.hotKeys),c=Object(At.a)(l.listOfIntervalsHotKeys);if(!i.key&&!i.change)return Object(T.a)({},e,{hotKeys:Object(T.a)({},e.hotKeys,{newHotKey:i})});if(i.key&&!i.change&&l.newHotKey.change){for(var s in l)l.hasOwnProperty(s)&&s!==i.newHotKeyType?l[s]===i.key&&(l[s]=null):l[s]=i.key;for(var u=0;u<c.length;u++)null===i.index||i.index!==u?c[u]===i.key&&(c[u]=null):c[u]=i.key;return l.newHotKey=i,l.listOfIntervalsHotKeys=c,Object(T.a)({},e,{hotKeys:Object(T.a)({},l)})}return Object(T.a)({},e,{hotKeys:Object(T.a)({},e.hotKeys,{newHotKey:i})});case"SET_INITIAL_STATE":var d=e.mode,p=e.stat;return Object(T.a)({},St,{mode:d,stat:p});default:return Object(T.a)({},e)}},piano:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BORDERS_OF_RANGE":return Object(T.a)({},e,t.payload);case"UPDATE_PIANO_KEYS":var n=_t(e.firstBorder.index,e.secondBorder.index),a=kt(n),o=a.arrOfNotes,r=a.mapIndex;return Object(T.a)({},e,{arrOfNotes:o,sliceArr:n,mapIndex:r});case"SHOW_NOTES_ON_THE_PIANO":var i=e.arrOfNotes,l=e.mapIndex,c=t.payload,s=c.sequence,u=c.type;return Object(T.a)({},e,{arrOfNotes:jt({arrOfNotes:i,sequence:s,type:u,active:!0,mapIndex:l})});case"SET_INITIAL_STATE":return qt;default:return e}},intervals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_TYPE_OF_INTERVAL":return Object(T.a)({},e,{typeOfInterval:t.payload});case"INTERVALS_SETTINGS_ACTION":var n=t.payload;return Object(T.a)({},e,{settingsIsOpen:n});case"INVERSE_CHOSEN_INTERVAL":var a=Object(T.a)({},t.payload),o=a.chosen,r=Object(At.a)(e.allIntervals);if(o&&r.reduce(function(e,t){return t.chosen?e+1:e},0)<=2)return Object(T.a)({},e);var i=function(e,t){return e.findIndex(function(e){return e.name===t})}(r,a.name);return a.chosen=!a.chosen,r[i]=a,Object(T.a)({},e,{allIntervals:r});case"SHOW_THE_CORRECT_INTERVAL":return Object(T.a)({},e,{showAnswer:!0});case"GET_NEXT_INTERVAL":var l=t.payload,c=function(e){var t=e.initNewIntervalSequence,n=e.nextActiveInterval,a=e.nextSequenceOfNotes,o=e.sliceArr,r=e.allIntervals,i=t?Ut(r):n||Ut(r);return{sequenceOfNotes:t?Ee(o,i):a||Ee(o,i),nextActiveInterval:n=Ut(r),nextSequenceOfNotes:a=Ee(o,n),activeInterval:i}}({sliceArr:l.sliceArr,initNewIntervalSequence:l.initNewIntervalSequence,allIntervals:e.allIntervals,nextActiveInterval:e.nextActiveInterval,nextSequenceOfNotes:e.nextSequenceOfNotes}),s=c.sequenceOfNotes,u=c.nextActiveInterval,d=c.nextSequenceOfNotes,p=c.activeInterval;return Object(T.a)({},e,{activeInterval:p,sequenceOfNotes:s,showAnswer:!1,nextActiveInterval:u,nextSequenceOfNotes:d});case"SET_ACTIVE_KEYBOARD_INTERVAL":return Object(T.a)({},e,{activeKeyboardInterval:t.payload});case"SET_INITIAL_STATE":return Yt;default:return e}},statistics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STATISTICS_CLEARING":return Object(T.a)({},e,Vt);case"INCREMENT_RIGHT_ANSWERS":var n=e.rightAnswers+1,a=e.amountOfAnswers+1;return Object(T.a)({},e,{rightAnswers:n,amountOfAnswers:a,nameOfInterval:t.payload?t.payload:null,right:!0,showAnswer:!0});case"INCREMENT_AMOUNT_OF_ANSWERS":var o=e.amountOfAnswers+1;return Object(T.a)({},e,{amountOfAnswers:o,nameOfInterval:t.payload?t.payload:null,right:!1,showAnswer:!0});case"NEXT_BUTTON_CLICK":return Object(T.a)({},e,{nameOfInterval:"",right:!1});case"STATISTICS_HIDE_ANSWER":return Object(T.a)({},e,{showAnswer:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_NOTE":var n=t.sliceArr,a=n[Math.floor(Math.random()*n.length)].key;return Object(T.a)({},e,{note:a});default:return Object(T.a)({},e)}},dictation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NEW_MELODY":var n=e.amountOfNotes,a=function(e){for(var t=e.sliceArr,n=e.amountOfNotes,a=[],o=0;o<n;o++){var r=Object(T.a)({},t[Math.floor(Math.random()*t.length)]);a.push(r)}return a}({sliceArr:Object(At.a)(t.sliceArr),amountOfNotes:n});return Object(T.a)({},e,{sequenceOfMelody:a});case"CHANGE_MODE":var o=t.payload;return Object(T.a)({},e,{modeWrite:o,readyToCheck:!1});case"ADD_NOTE_TO_ANSWER_ARRAY":var r=e.sequenceOfWrittenMelody;r.push(t.payload);var i=!1;return e.amountOfNotes===r.length&&(i=!0),Object(T.a)({},e,{sequenceOfWrittenMelody:r,readyToCheck:i});case"POP_LAST_ELEM_FROM_ANSWER_ARRAY":var l=Object(At.a)(e.sequenceOfWrittenMelody);return l.length>0&&l.pop(),Object(T.a)({},e,{sequenceOfWrittenMelody:l});case"WRITE_ANSWERS":var c=t.payload.length>0;return Object(T.a)({},e,{answers:t.payload,answerGiven:c});case"CLEAR_WRITTEN_MELODY":return Object(T.a)({},e,{sequenceOfWrittenMelody:[]});case"CHANGE_SETTINGS":return Object(T.a)({},e,t.payload);case"SET_INITIAL_STATE":return zt;default:return Object(T.a)({},e)}}}),Qt=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},Zt=Object(Nt.c)(Jt,Qt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Zt.subscribe(function(){var e=Zt.getState(),t={};t.piano=e.piano,t.dictation=e.dictation,t.application=e.application;var n=e.intervals,a=n.allIntervals,o=n.typeOfInterval;t.intervals={allIntervals:a,typeOfInterval:o},localStorage.setItem("reduxState",JSON.stringify(t))}),i.a.render(o.a.createElement(I.a,{store:Zt},o.a.createElement(h.a,null,o.a.createElement(Et,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.8c732339.chunk.js.map